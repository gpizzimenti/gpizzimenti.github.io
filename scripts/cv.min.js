import{fontGlyphs,fontItalic,fontRegular,fontSemiBold}from"../styles/fonts/cv/fonts.min.js";import{unescapeHtml}from"./lib/utils.min.js";const meta={title:"Giuseppe Pizzimenti - Software Developer - CV",subject:"Giuseppe Pizzimenti - Software Developer - Curriculum Vitae",author:"Giuseppe Pizzimenti",keywords:"cv, developer, programmer, frontend, backend, fullstack",creator:"giuseppe.pizzimenti.dev"},defaultColor=[4,59,93],settings={marginX:15,marginY:17,wordSpacing:1,lineSpacing:2,titleSize:26,subTitleSize:16,headingSize:12,bodySize:10,footerSize:8,accentColor:defaultColor,bodyColor:[40,40,40],title:"Giuseppe Pizzimenti",subtitle:"Software developer",email:"giuseppe.pizzimenti@gmail.com",site:"gpizzimenti.github.io",cellphone:"+39.XXX.XXXXXXX",fileName:"Giuseppe_Pizzimenti_CV"},cursor={x:settings.marginX,y:settings.marginY};let currentDoc=null;export async function buildPDF(e){return new Promise(((t,n)=>{const{jsPDF:i}=window.jspdf;try{const n=new i({orientation:"p",unit:"mm",format:"a4",putOnlyUsedFonts:!0,compress:!0});currentDoc=n,initDoc(n),printSections(n,e),addPageFooter(n,e),downloadPDF(n,e),t()}catch(e){n(e)}}))}const initDoc=e=>{cursor.x=settings.marginX,cursor.y=settings.marginY,e.setProperties(meta),setFonts(e),addPageHeader(e)},setFonts=e=>{e.addFileToVFS("fontRegular.ttf",fontRegular),e.addFont("fontRegular.ttf","fontRegular","normal"),e.addFileToVFS("fontSemiBold.ttf",fontSemiBold),e.addFont("fontSemiBold.ttf","fontSemiBold","normal"),e.addFileToVFS("fontItalic.ttf",fontItalic),e.addFont("fontItalic.ttf","fontItalic","normal"),e.addFileToVFS("fontGlyphs.ttf",fontGlyphs),e.addFont("fontGlyphs.ttf","fontGlyphs","normal")},print=(e,t,n)=>{const i=t||"",o=n||{},r=o.color||settings.bodyColor,s=o.size||settings.bodySize,c=o.font||"fontRegular";let l=o.x?"function"==typeof o.x?o.x():o.x:cursor.x,a=o.y?"function"==typeof o.y?o.y():o.y:cursor.y;e.setFont(c),e.setFontSize(s),e.setTextColor(r[0],r[1],r[2]);const g=e.getTextDimensions(i);!o.force&&l+g.w>e.getPageWidth()-settings.marginX&&(l=o.minX?o.minX:settings.marginX,a=cursor.y+g.h+(o.lineSpacing?o.lineSpacing:settings.lineSpacing)),!o.force&&a>e.getPageHeight()-settings.marginY-s&&(e.addPage(),a=settings.marginY),o.align&&"right"===o.align?l=e.getPageWidth()-g.w-settings.marginX:o.align&&"center"===o.align&&(l=e.getPageWidth()/2-g.w/2),o.border&&e.roundedRect(l-1.5,a-1.35*g.h,g.w+3,g.h+3,1,1,"S"),o.url?e.textWithLink(i,l,a,{url:o.url}):e.text(i,l,a),o.underline&&(e.setLineWidth(.2),e.setDrawColor(r[0],r[1],r[2]),e.line(l,a+g.h-2,l+g.w,a+g.h-2)),cursor.x=l+g.w+(o.wordSpacing?o.wordSpacing:settings.wordSpacing),cursor.y=a;return{x:l,y:a,w:g.w,h:g.h}},println=(e,t,n)=>{const i=n||{},o=print(e,t,n);return cursor.x=i.x||settings.marginX,cursor.y=o.y+o.h+(i.lineSpacing?i.lineSpacing:settings.lineSpacing),o},printParagraph=(e,t,n)=>{let i,o=0;const r=n||{},s=r.w||e.getPageWidth()-(r.x?r.x+settings.marginX:1.5*settings.marginX);e.setFontSize(r.size||settings.bodySize);const c=e.splitTextToSize(t,s);for(const t of c)i=println(e,t,r),r.y&&delete r.y,o+=i.h;return i.w=s,i.h=o,cursor.x=settings.marginX,cursor.y=i.y+(r.lineSpacing?r.lineSpacing:settings.lineSpacing),i},printLi=(e,t,n)=>{const i=n||{},o=i.size||settings.bodySize,r=i.x||settings.marginX;!i.force&&cursor.y>e.getPageHeight()-settings.marginY-o&&(e.addPage(),cursor.y=settings.marginY);const s=cursor.y;e.setTextColor(settings.accentColor[0],settings.accentColor[1],settings.accentColor[2]),e.setFont("fontSemiBold"),e.setFontSize(settings.bodySize+1),e.text("â€¢",r,s+.1),e.setFont(i.font||"fontRegular"),e.setTextColor(settings.bodyColor[0],settings.bodyColor[1],settings.bodyColor[2]),e.setFontSize(i.size||settings.bodySize),i.x=r+3,i.y=s;return printParagraph(e,t,i)},printHeading=(e,t,n)=>{const i=print(e,t,{font:"fontSemiBold",x:32,y:cursor.y+2*settings.lineSpacing,color:settings.accentColor,size:settings.headingSize});return e.setLineWidth(.4),e.setDrawColor(settings.accentColor[0],settings.accentColor[1],settings.accentColor[2]),e.line(settings.marginX,i.y-i.h/3,30,i.y-i.h/3),cursor.x=settings.marginX,cursor.y+=3*settings.lineSpacing,i},addPageHeader=e=>{const t=print(e,settings.title,{font:"fontSemiBold",color:settings.accentColor,size:settings.titleSize});e.setFont("fontRegular"),e.setFontSize(settings.subTitleSize);const n=e.getTextDimensions(settings.subtitle),i=println(e,settings.subtitle,{x:t.w+t.x-n.w,y:t.y+t.h,color:settings.accentColor,size:settings.subTitleSize});e.setLineWidth(.7),e.setDrawColor(settings.accentColor[0],settings.accentColor[1],settings.accentColor[2]),e.line(settings.marginX,i.y-i.h/3,i.x-2,i.y-i.h/3);const o=println(e,settings.email,{align:"right",y:settings.marginY-5,color:settings.accentColor,url:`mailto:${settings.email}`}),r=println(e,settings.site,{y:o.y+3.5*settings.lineSpacing,x:o.x,color:settings.accentColor,url:`https://${settings.site}`}),s=println(e,settings.cellphone,{y:r.y+3.5*settings.lineSpacing,x:o.x,color:settings.accentColor,url:`tel:${settings.cellphone.replaceAll(".","")}`});println(e,"e",{font:"fontGlyphs",color:settings.accentColor,x:o.x-5,y:o.y+.5}),println(e,"w",{font:"fontGlyphs",color:settings.accentColor,x:r.x-4.7,y:r.y,size:9}),println(e,"c",{font:"fontGlyphs",color:settings.accentColor,x:s.x-4.1,y:s.y-.2,size:9.5}),cursor.y+=3*settings.lineSpacing,cursor.x=settings.marginX},addPageFooter=(e,t)=>{const n=e.internal.getNumberOfPages(),i=(new Date).toLocaleString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric",hour12:!1,hour:"numeric",minute:"2-digit"});for(let t=1;t<n+1;t++){e.setPage(t);const o=e.getPageHeight()-settings.marginY/2+1,r=print(e,`https://${settings.site}/#cv`,{x:settings.marginX,y:o-.2,force:!0,size:settings.bodySize-2,underline:!0,color:settings.accentColor,url:`https://${settings.site}/#cv`});print(e,` - ${i}`,{x:r.x+r.w,y:o,force:!0,color:settings.accentColor,size:settings.footerSize}),print(e,`${t} / ${n}`,{y:o,force:!0,color:settings.accentColor,size:settings.footerSize,align:"right"})}},printSections=(e,t)=>{document.querySelectorAll(`main > ul > li:has([lang='${t}']), article details .content`).forEach((e=>{e.style.contentVisibility="visible"})),document.querySelectorAll(`section[data-sezione='cv'][lang='${t}'] [type='checkbox'][data-rel='cv']:checked`).forEach((n=>{sections[n.value]&&sections[n.value](e,t)}))},checkForBreak=(e,t)=>{let n=cursor.y;return n>e.getPageHeight()-settings.marginY-2*settings.bodySize&&(t&&print(e,"[cont.]",{y:n,align:"right",force:!0,font:"fontItalic",size:settings.bodySize-1.5}),e.addPage(),n=settings.marginY,cursor.y=n),n},downloadPDF=(e,t)=>{e.save(`${settings.fileName}_${t.toUpperCase()}_${new Date(Date.now()).toLocaleString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric",hour12:!1,hour:"numeric",minute:"2-digit",second:"2-digit"}).replaceAll(" ","").replaceAll(",","_").replaceAll("/","").replaceAll(":","")}.pdf`)},sections={chisono:(e,t)=>{const n=document.querySelectorAll(`section[data-sezione='chisono'][lang='${t}'] p[data-cv='chisono']`);let i="";n.forEach((e=>{i+=`${unescapeHtml(e.innerHTML).replace(/\n/g,"")}\n`}));printParagraph(e,i,{x:0});const o=cursor.y,r=print(e,"https://www.linkedin.com/in/giuseppepizzimenti",{x:settings.marginX+5.5,font:"fontSemiBold",url:"https://www.linkedin.com/in/giuseppepizzimenti",underline:!0,size:settings.bodySize-1.2});print(e,"i",{font:"fontGlyphs",color:settings.accentColor,size:settings.bodySize+3,x:settings.marginX,y:r.y+.7});const s=print(e,"https://github.com/gpizzimenti",{x:r.x+r.w+10,y:o,font:"fontSemiBold",url:"https://github.com/gpizzimenti",underline:!0,size:settings.bodySize-1.2});println(currentDoc,"g",{font:"fontGlyphs",color:settings.accentColor,size:settings.bodySize+3,x:s.x-5.5,y:s.y+.7})},competenze:(e,t)=>{let n=unescapeHtml(document.querySelector(`#titleSpecialties${t.charAt(0).toUpperCase()}${t.slice(1)}`).innerHTML);printHeading(e,n);const i=document.querySelectorAll(`#listSpecialties${t.charAt(0).toUpperCase()}${t.slice(1)} li`);for(const t of i){checkForBreak(e,!0);n=`${unescapeHtml(t.innerHTML).replace(/\n/g,"")}\n`,printLi(e,n)}},esperienza:(e,t)=>{const n=unescapeHtml(document.querySelector(`#titleEsperienza${t.charAt(0).toUpperCase()}${t.slice(1)}`).innerHTML);printHeading(e,n),cursor.y+=settings.lineSpacing,document.querySelectorAll(`section[data-sezione="esperienza"][lang="${t}"] > article > ul > li`).forEach(((n,i,o)=>{const r=n.querySelector("h4"),s=r.querySelector("a"),c=`${unescapeHtml(r.innerHTML).replace(/\n/g,"")}`,l=checkForBreak(e,!0),a=printLi(e,`${c}\n`,{font:"fontSemiBold",force:!0});if(s){const t=e.getTextDimensions(c);print(e,"(",{force:!0,size:settings.bodySize-2,x:a.x+t.w+1.5,y:l-.2,font:"fontItalic"}),print(e,s.getAttribute("href"),{url:s.getAttribute("href"),force:!0,size:settings.bodySize-2,y:l-.2,font:"fontItalic",underline:!0}),print(e,")",{force:!0,size:settings.bodySize-2,y:l-.2,font:"fontItalic"})}const g=n.querySelector("summary > b"),p=`${unescapeHtml(g.innerHTML).replace(/\n/g,"")}`,u=print(e,p,{y:l-1,align:"right",force:!0,font:"fontItalic",size:settings.bodySize-1.5,color:settings.accentColor});if(println(e,"a",{font:"fontGlyphs",force:!0,color:settings.accentColor,size:settings.bodySize-1.3,x:u.x-5,y:l-1}),document.querySelector(`section[data-sezione='cv'][lang='${t}'] [type='checkbox'][value='sommari']:checked`)){const t=n.querySelector(".content > p"),i=`${unescapeHtml(t.innerHTML).replace(/\n/g,"")}\n`;cursor.y+=settings.lineSpacing-.5,printParagraph(e,i,{font:"fontRegular",x:settings.marginX+3,size:settings.bodySize-1,lineSpacing:settings.lineSpacing-.5}),cursor.y+=settings.lineSpacing-1.5,n.querySelectorAll("li").forEach((t=>{const n=`${unescapeHtml(t.innerHTML).replace(/\n/g,"")}\n`,i=printLi(e,n,{x:settings.marginX+3,size:settings.bodySize-1,lineSpacing:settings.lineSpacing-.5});cursor.y=i.y-settings.lineSpacing+2}))}i<o.length-1&&(cursor.y+=settings.lineSpacing+2)}))},skills:(e,t)=>{const n=unescapeHtml(document.querySelector(`#titleSkills${t.charAt(0).toUpperCase()}${t.slice(1)}`).innerHTML);printHeading(e,n);const i=new Set;document.querySelectorAll(`section[data-sezione='cv'][lang='${t}'] [type='checkbox'][data-rel='skills']:checked`).forEach((e=>{document.querySelectorAll(`section[data-sezione="skills"][lang="${t}"] > article > ul[data-rel="${e.value}"] > li span[data-rel='cv']`).forEach((e=>{const t=`${unescapeHtml(e.innerHTML).replace(/\n/g,"")}`;i.add(t)}))}));const o=Array.from(i).sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase())));cursor.y+=settings.lineSpacing+1;for(const t of o)checkForBreak(e,!0),print(e,t,{border:!0,size:settings.bodySize-1,lineSpacing:settings.lineSpacing+3,wordSpacing:settings.wordSpacing+4});cursor.y+=5*settings.lineSpacing},formazione:(e,t)=>{checkForBreak(e,!0);const n=unescapeHtml(document.querySelector(`#titleFormazione${t.charAt(0).toUpperCase()}${t.slice(1)}`).innerHTML);let i=cursor.y;i>e.getPageHeight()-settings.marginY-2*settings.bodySize&&(e.addPage(),i=settings.marginY,cursor.y=i),printHeading(e,n),checkForBreak(e,!0),cursor.y+=settings.lineSpacing+1,i=cursor.y;const o=document.querySelector(`section[data-sezione='formazione'][lang='${t}']`),r=o.querySelector("p > span").innerText,s=o.querySelector("p > a"),c=(printLi(e,s.innerText,{url:s.getAttribute("href"),font:"fontSemiBold",force:!0,underline:!0}),e.getTextDimensions(s.innerText)),l=(println(e,r,{font:"fontItalic",force:!0,y:i+c.h+3,x:settings.marginX+3}),o.querySelector("p > b").innerText),a=`${unescapeHtml(l).replace(/\n/g,"")}`,g=print(e,a,{y:i-1,align:"right",force:!0,font:"fontItalic",size:settings.bodySize-1.5,color:settings.accentColor});println(e,"a",{font:"fontGlyphs",force:!0,color:settings.accentColor,size:settings.bodySize-1.3,x:g.x-5,y:i-1}),cursor.y+=12;const p=document.querySelector(`section[data-sezione='cv'][lang='${t}'] [type='checkbox'][value='online']:checked`),u=document.querySelector(`section[data-sezione='cv'][lang='${t}'] [type='checkbox'][value='inpresenza']:checked`);if(!p&&!u)return!0;const y=println(e,"en"===t?"Last completed courses":"Ultimi corsi completati",{x:settings.marginX+3,font:"fontSemiBold",color:settings.accentColor,size:settings.headingSize-2}),d=println(e,"en"===t?"( complete list:":"( elenco completo:",{x:y.x+settings.wordSpacing+y.w,y:y.y-.2,font:"fontItalic",size:settings.bodySize-2,color:settings.accentColor}),f=println(e,`https://${settings.site}/#formazione`,{x:d.x+settings.wordSpacing+d.w,y:y.y-.2,font:"fontItalic",size:settings.bodySize-2,underline:!0,color:settings.accentColor,url:`https://${settings.site}/#formazione`});println(e,")",{x:f.x+ +settings.wordSpacing+f.w,y:y.y-.2,font:"fontItalic",size:settings.bodySize-2,color:settings.accentColor});cursor.y+=3;const m=document.querySelector(`section[data-sezione='cv'][lang='${t}'] [type='number'][data-rel='online']`).value,S=document.querySelector(`section[data-sezione='cv'][lang='${t}'] [type='number'][data-rel='inpresenza']`).value;let z=1,h=1;const x=p&&u?"":p?"[data-online=true]":"[data-online=false]";document.querySelectorAll(`section[data-sezione="formazione"][lang="${t}"] > article  li.corsi li${x}`).forEach((t=>{const n=t.querySelector("h5"),i=n.querySelector("a"),o=n.closest("details"),r=o.querySelector("b").innerText,s=`${unescapeHtml(r).replace(/\n/g,"")}`,c=t.querySelector("p.relatori"),l=t.querySelector("p.piattaforme"),a=t.querySelector("p.certificati"),g=a?a.querySelector("a"):null;let p;if("true"===t.dataset.online){if(z>m)return;z+=1}else{if(h>S)return;h+=1}(c||l)&&o.toggleAttribute("open",!0),c&&(p=c.innerText),l&&(p+=(c?" (":"")+l.innerText+(c?")":""));const u=i?i.innerHTML:n.innerHTML,y=g?g.getAttribute("href"):i?.getAttribute("href");checkForBreak(e,!0);const d=printLi(e,unescapeHtml(u).trim(),{url:y,font:"fontSemiBold",underline:!!i}),f=print(e,s,{y:d.y-1,align:"right",force:!0,font:"fontItalic",size:settings.bodySize-1.5,color:settings.accentColor});println(e,"a",{font:"fontGlyphs",force:!0,color:settings.accentColor,size:settings.bodySize-1.3,x:f.x-5,y:d.y-1}),cursor.y+=settings.lineSpacing+1}));cursor.y+=1.5*settings.lineSpacing},associazioni:(e,t)=>{const n=unescapeHtml(document.querySelector(`#titleAssociazioni${t.charAt(0).toUpperCase()}${t.slice(1)}`).innerHTML);let i=cursor.y;i>e.getPageHeight()-settings.marginY-2*settings.bodySize&&(e.addPage(),i=settings.marginY,cursor.y=i),printHeading(e,n),cursor.y+=settings.lineSpacing+1,i=cursor.y;document.querySelectorAll(`section[data-sezione="associazioni"][lang="${t}"] > article  > ul li`).forEach((t=>{const n=t.querySelector("h4"),i=n.querySelector("a"),o=t.querySelector(".data").innerText,r=`${unescapeHtml(o).replace(/\n/g,"")}`,s=t.querySelector(".descrizione")?.innerText,c=i?i.innerHTML:n.innerHTML,l=i?.getAttribute("href");checkForBreak(e,!0);const a=printLi(e,unescapeHtml(c).trim(),{url:l,font:"fontSemiBold",underline:!!i}),g=print(e,r,{y:a.y-1,align:"right",force:!0,font:"fontItalic",size:settings.bodySize-1.5,color:settings.accentColor});if(println(e,"a",{font:"fontGlyphs",force:!0,color:settings.accentColor,size:settings.bodySize-1.3,x:g.x-5,y:a.y-1}),cursor.y+=settings.lineSpacing+1,s){const t=e.getTextDimensions(c);printParagraph(e,s,{font:"fontItalic",force:!0,y:a.y+t.h+(i?3:2),x:settings.marginX+3});checkForBreak(e,!0),cursor.y+=settings.lineSpacing+3}}));cursor.y+=1.5*settings.lineSpacing},pubblicazioni:(e,t)=>{const n=unescapeHtml(document.querySelector(`#titlePubblicazioni${t.charAt(0).toUpperCase()}${t.slice(1)}`).innerHTML);let i=cursor.y;i>e.getPageHeight()-settings.marginY-3*settings.bodySize&&(e.addPage(),i=settings.marginY,cursor.y=i),printHeading(e,n),cursor.y+=settings.lineSpacing+1,i=cursor.y;document.querySelectorAll(`section[data-sezione="pubblicazioni"][lang="${t}"] > article  > ul li`).forEach((t=>{const n=t.querySelector("h4"),i=n.querySelector("a"),o=t.querySelector(".data").innerText,r=`${unescapeHtml(o).replace(/\n/g,"")}`,s=t.querySelector(".descrizione")?.innerText,c=i?i.innerHTML:n.innerHTML,l=i?.getAttribute("href");checkForBreak(e,!0);const a=printLi(e,unescapeHtml(c).trim(),{url:l,font:"fontSemiBold",underline:!!i}),g=print(e,r,{y:a.y-1,align:"right",force:!0,font:"fontItalic",size:settings.bodySize-1.5,color:settings.accentColor});if(println(e,"a",{font:"fontGlyphs",force:!0,color:settings.accentColor,size:settings.bodySize-1.3,x:g.x-5,y:a.y-1}),cursor.y+=settings.lineSpacing+1,s){const t=e.getTextDimensions(c);printParagraph(e,s,{font:"fontItalic",force:!0,y:a.y+t.h+(i?3:2),x:settings.marginX+3});checkForBreak(e,!0),cursor.y+=settings.lineSpacing+3}}))},lingue:(e,t)=>{let n="en"===t?"Languages":"Lingue",i=cursor.y;i>e.getPageHeight()-settings.marginY-2*settings.bodySize&&(e.addPage(),i=settings.marginY,cursor.y=i),printHeading(e,n),cursor.y+=settings.lineSpacing+1,i=cursor.y,n="en"===t?"Italian":"Italiano";const o=printLi(e,n);print(e,"en"===t?"( native )":"( madrelingua )",{x:o.x+14,y:i-.2,font:"fontItalic",size:settings.bodySize-2,force:!0}),cursor.y+=settings.lineSpacing+5,i=cursor.y,n="en"===t?"English":"Inglese";const r=printLi(e,n);println(e,"en"===t?"( reading : C1 - writing, speaking, listening : B2 )":"( lettura : C1 - scrittura, parlato, ascolto : B2 )",{x:r.x+14,y:i-.2,font:"fontItalic",size:settings.bodySize-2,force:!0})}};