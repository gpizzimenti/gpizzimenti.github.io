export function hasTouch(){const e=window.matchMedia?.("(any-pointer:coarse)").matches||"ontouchstart"in window||window.DocumentTouch&&window.document instanceof DocumentTouch||window.navigator.maxTouchPoints||window.navigator.msMaxTouchPoints;return document.querySelector("html").classList.toggle("has-touch",!!e),e}export function html(e,t,n){if(!e)return!1;n&&t||(e.textContent="");const o=document.createElement("template"),r=document.createDocumentFragment();o.innerHTML=t,r.appendChild(o.content),e.appendChild(r)}export const nextFrame=function(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))};export const softExec=function(e,t){"requestIdleCallback"in window?requestIdleCallback(e,{timeout:t||5e3}):nextFrame(e)};export function debounce(e,t=300){let n;return(...o)=>{clearTimeout(n),n=setTimeout((()=>{e.apply(this,o)}),t)}}export function englishOrdinalSuffix(e){return{one:"st",two:"nd",few:"rd",other:"th"}[new Intl.PluralRules("en",{type:"ordinal"}).select(e)]}export function unescapeHtml(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}export function setIntersectionObserverItems(e){if(!e?.elements)return!1;let t,n=e.elements.length?e.elements.length:1;let o;(e.root||e.rootMargin||e.threshold)&&(o={},e.root&&(o.root=e.root),e.rootMargin&&(o.rootMargin=e.rootMargin),e.threshold&&(o.threshold=e.threshold)),t=new IntersectionObserver((function(o){o.forEach((o=>{var r,a;o.isIntersecting?(e.dontUnobserve||(t.unobserve(o.target),n-=1,0===n&&(t.disconnect(),t=null,e.callbackCompleted&&e.callbackCompleted())),r=()=>{e.callbackIn(o)},"requestIdleCallback"in window?requestIdleCallback(r,{timeout:a||5e3}):nextFrame(r)):e.callbackOut&&e.callbackOut(o)}))}),o),e.elements.forEach((e=>{t.observe(e)}))}export async function fetchResource(e,t,n){return new Promise(((o,r)=>{let a,c,s,l,i;const u="js"===t||"css"===t?document.head:document.body;if(n&&(i=`GP-resource-${n}-${t}`,a=u.querySelector(`#${i}`),a&&(a.classList.contains("loading")||o(a),l=!0)),!l){"js"===t?(c="script",s={fetchpriority:"high",type:"text/javascript",src:e,async:!0}):"css"===t?(c="link",s={fetchpriority:"high",type:"text/css",rel:"stylesheet preload",href:e,as:"style"}):"template"===t&&(c="template",s={}),i&&(s.id=i),a=document.createElement(c),a.classList.add("loading"),"js"===t||"css"===t?(a.onload=a.onreadystatechange=()=>{a.classList.remove("loading"),a.onreadystatechange=a.onload=null,o(a)},a.onerror=()=>{a.classList.remove("loading"),a.onerror=null,r(a)}):fetch(e).then((e=>e.text())).then((e=>{a.innerHTML=e,o(a)})).catch((()=>{r(a)})).finally((()=>{a.classList.remove("loading")}));for(const e in s)a[e]=s[e];u.appendChild(a)}}))}