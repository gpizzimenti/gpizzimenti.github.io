export function hasTouch(){const e=window.matchMedia?.("(any-pointer:coarse)").matches||"ontouchstart"in window||window.DocumentTouch&&window.document instanceof DocumentTouch||window.navigator.maxTouchPoints||window.navigator.msMaxTouchPoints;return document.querySelector("html").classList.toggle("has-touch",!!e),e}export function isScrollable(e){const t=window.getComputedStyle(e)["overflow-y"],o=window.getComputedStyle(e)["overflow-x"],n=("scroll"===t||"auto"===t)&&e.scrollHeight>e.offsetHeight,r=("scroll"===o||"auto"===o)&&e.scrollWidth>e.offsetWidth;return{vertical:n,horizontal:r,both:n&&r}}export function html(e,t,o){if(!e)return!1;o&&t||(e.textContent="");const n=document.createElement("template"),r=document.createDocumentFragment();n.innerHTML=t,r.appendChild(n.content),e.appendChild(r)}export const nextFrame=function(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))};export const softExec=function(e,t){"requestIdleCallback"in window?requestIdleCallback(e,{timeout:t||5e3}):nextFrame(e)};export function debounce(e,t=300){let o;return(...n)=>{clearTimeout(o),o=setTimeout((()=>{e.apply(this,n)}),t)}}export function englishOrdinalSuffix(e){return{one:"st",two:"nd",few:"rd",other:"th"}[new Intl.PluralRules("en",{type:"ordinal"}).select(e)]}export function unescapeHtml(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}export function setIntersectionObserverItems(e){if(!e?.elements)return!1;let t,o=e.elements.length?e.elements.length:1;let n;(e.root||e.rootMargin||e.threshold)&&(n={},e.root&&(n.root=e.root),e.rootMargin&&(n.rootMargin=e.rootMargin),e.threshold&&(n.threshold=e.threshold)),t=new IntersectionObserver((function(n){n.forEach((n=>{var r,l;n.isIntersecting?(e.dontUnobserve||(t.unobserve(n.target),o-=1,0===o&&(t.disconnect(),t=null,e.callbackCompleted&&e.callbackCompleted())),r=()=>{e.callbackIn(n)},"requestIdleCallback"in window?requestIdleCallback(r,{timeout:l||5e3}):nextFrame(r)):e.callbackOut&&e.callbackOut(n)}))}),n),e.elements.forEach((e=>{t.observe(e)}))}export async function fetchResource(e,t,o){return new Promise(((n,r)=>{let l,c,s,a,i;const u="js"===t||"css"===t?document.head:document.body;if(o&&(i=`GP-resource-${o}-${t}`,l=u.querySelector(`#${i}`),l&&(l.classList.contains("loading")||n(l),a=!0)),!a){"js"===t?(c="script",s={fetchpriority:"high",type:"text/javascript",src:e,async:!0}):"css"===t?(c="link",s={fetchpriority:"high",type:"text/css",rel:"stylesheet preload",href:e,as:"style"}):"template"===t&&(c="template",s={}),i&&(s.id=i),l=document.createElement(c),l.classList.add("loading"),"js"===t||"css"===t?(l.onload=l.onreadystatechange=()=>{l.classList.remove("loading"),l.onreadystatechange=l.onload=null,n(l)},l.onerror=()=>{l.classList.remove("loading"),l.onerror=null,r(l)}):fetch(e).then((e=>e.text())).then((e=>{l.innerHTML=e,n(l)})).catch((()=>{r(l)})).finally((()=>{l.classList.remove("loading")}));for(const e in s)l[e]=s[e];u.appendChild(l)}}))}