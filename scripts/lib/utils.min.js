export function hasTouch(){const e=window.matchMedia?.("(any-pointer:coarse)").matches||"ontouchstart"in window||window.DocumentTouch&&window.document instanceof DocumentTouch||window.navigator.maxTouchPoints||window.navigator.msMaxTouchPoints;return document.querySelector("html").classList.toggle("has-touch",!!e),e}export function isScrollable(e){const t=window.getComputedStyle(e)["overflow-y"],o=window.getComputedStyle(e)["overflow-x"],n=("scroll"===t||"auto"===t)&&e.scrollHeight>e.offsetHeight,r=("scroll"===o||"auto"===o)&&e.scrollWidth>e.offsetWidth;return{vertical:n,horizontal:r,both:n&&r}}export function html(e,t,o){if(!e)return!1;o&&t||(e.textContent="");const n=document.createElement("template"),r=document.createDocumentFragment();n.innerHTML=t,r.appendChild(n.content),e.appendChild(r)}export const nextFrame=function(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))};export const softExec=function(e,t){"requestIdleCallback"in window?requestIdleCallback(e,{timeout:t||5e3}):nextFrame(e)};export function debounce(e,t=300){let o;return(...n)=>{clearTimeout(o),o=setTimeout((()=>{e.apply(this,n)}),t)}}export function englishOrdinalSuffix(e){return{one:"st",two:"nd",few:"rd",other:"th"}[new Intl.PluralRules("en",{type:"ordinal"}).select(e)]}export function unescapeHtml(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}export function setIntersectionObserverItems(e){if(!e?.elements)return!1;let t,o=e.elements.length?e.elements.length:1;let n;(e.root||e.rootMargin||e.threshold)&&(n={},e.root&&(n.root=e.root),e.rootMargin&&(n.rootMargin=e.rootMargin),e.threshold&&(n.threshold=e.threshold)),t=new IntersectionObserver((function(n){n.forEach((n=>{n.isIntersecting?(e.dontUnobserve||(t.unobserve(n.target),o-=1,0===o&&(t.disconnect(),t=null,e.callbackCompleted&&e.callbackCompleted())),e.callbackIn(n)):e.callbackOut&&e.callbackOut(n)}))}),n),e.elements.forEach((e=>{t.observe(e)}))}export async function fetchResource(e,t,o,n){return new Promise(((r,l)=>{let s,c,a,i,u;const d="js"===t||"jsonld"===t||"css"===t?document.head:n||document.body;if(o&&(u=`GP-resource-${o}-${t}`,s=d.querySelector(`#${u}`),s&&(s.classList.contains("loading")||r(s),i=!0)),!i){"js"===t?(c="script",a={fetchpriority:"high",type:"text/javascript",src:e,async:!0}):"jsonld"===t?(c="script",a={type:"application/ld+json"}):"css"===t?(c="link",a={fetchpriority:"high",type:"text/css",rel:"stylesheet preload",href:e,as:"style"}):"template"===t&&(c="template",a={}),u&&(a.id=u),s=document.createElement(c),s.classList.add("loading"),"js"===t||"css"===t?(s.onload=s.onreadystatechange=()=>{s.classList.remove("loading"),s.onreadystatechange=s.onload=null,r(s)},s.onerror=()=>{s.classList.remove("loading"),s.onerror=null,l(s)}):fetch(e).then((e=>e.text())).then((e=>{"jsonld"===t?s.textContent=e:s.innerHTML=e,r(s)})).catch((()=>{l(s)})).finally((()=>{s.classList.remove("loading")}));for(const e in a)s[e]=a[e];d.appendChild(s)}}))}