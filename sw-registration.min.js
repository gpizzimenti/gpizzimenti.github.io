"serviceWorker"in navigator&&window.addEventListener("load",(async()=>{(async()=>{const a=await navigator.serviceWorker.register("/service-worker.min.js");a.waiting&&a.active&&(window.swUpdate=!0,await e.skipWaiting()),a.addEventListener("updatefound",(()=>{const t=a.installing;t&&t.addEventListener("statechange",(async()=>{"installed"===t.state&&navigator.serviceWorker.controller&&(window.swUpdate=!0,setTimeout((async()=>{await e.prepareCachesForUpdate()}),500))}))}))})();const e={getWaitingWorker:async()=>(await navigator.serviceWorker.getRegistrations()).find((e=>e.waiting))?.waiting,skipWaiting:async()=>(await e.getWaitingWorker())?.postMessage({type:"SKIP_WAITING"}),prepareCachesForUpdate:async()=>(await e.getWaitingWorker())?.postMessage({type:"PREPARE_CACHES_FOR_UPDATE"})},a=async a=>{window.swUpdate&&(window.swUpdate=!1,await e.skipWaiting())};window.addEventListener("beforeunload",a),document.addEventListener("pagehide",a),window.addEventListener("online",(()=>{navigator.serviceWorker.controller.postMessage({type:"retry-requests"})}))}));